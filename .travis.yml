sudo: required
language: bash
services:
  - docker

notifications:
  email:
    on_success: never
    recipients:
      - lslezak@suse.cz
      - mvidner@suse.cz

before_install:
  - docker build -t yast-services-manager-image .
  # list the installed packages (just for easier debugging)
  - docker run --rm -it yast-services-manager-image rpm -qa | sort

script:
  # scan for changed systemd service statuses
  - docker run -it -e TRAVIS=1 -e TRAVIS_JOB_ID="$TRAVIS_JOB_ID" yast-services-manager-image bash -c "cd devel && ./systemd_status_check.rb"
